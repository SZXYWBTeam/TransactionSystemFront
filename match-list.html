<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>匹配列表</title>
    <link rel="stylesheet" type="text/css" media="screen" href="css/base.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/toolbar.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/table.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/match-list.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/minirefresh.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/minirefresh-common.css" />

</head>

<body>
    <div id="toolbar-container">
    </div>
    <div id="content" class="view-parent gravity-vertical">

        <div class="view">
            <span class="text-view">
                目标匹配金额：<span>0</span>
            </span>
        </div>

        <!-- 智能匹配结果 -->
        <div>
            <div class="dash-border view-parent">
                <span class=" text-view gravity-center-vertical">
                    <span class="gravity-center-vertical one-of-three">
                        <img src="img/trade-record.png" />&nbsp;
                        智能匹配结果
                    </span>
                </span>
            </div>

            <!-- 下拉刷新wrapper -->
            <div class=" table-content">
                <!-- 表格内容 -->
                <table class="table-detail">
                    <thead>
                        <td class="intel-match-td">用户名</td>
                        <td>买入金额</td>
                    </thead>
                    <!-- 数据列表显示的位置 -->
                    <tbody id="result-listdata">
                    </tbody>
                </table>
            </div>
        </div>
        <!-- 智能匹配结果end -->

        <!-- 卖出按钮 -->
        <div class="gravity-center">
            <span class="view text-view button oneline-button">
                卖出
            </span>
        </div>


        <!-- 用户列表 -->
        <div id="user-list-container">
            <div class="dash-border view-parent">
                <span class="text-view gravity-center-vertical">
                    <span class="gravity-center-vertical one-of-three">
                        <img src="img/user.png" />&nbsp;
                        手动匹配列表
                    </span>
                    <span class="text-view view">
                        &nbsp;已选择金额：
                        <span>0</span>
                    </span>
                </span>
            </div>

            <!-- 下拉刷新wrapper -->
            <div class=" table-content minirefresh-wrap" id="user-refresh-container">
                <!-- 下拉刷新滚动的内容视图 -->
                <div class="minirefresh-scroll">
                    <!-- 表格内容 -->
                    <table class="table-detail">
                        <thead>
                            <td class="user-choose-td"></td>
                            <td>用户名</td>
                            <td>买入金额</td>
                        </thead>
                        <!-- 数据列表显示的位置 -->
                        <tbody class="data-list " id="user-listdata">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- 用户列表end -->

        <!-- 卖出按钮 -->
        <div class="gravity-center" id="sale-button">
            <span class="view text-view button oneline-button">
                卖出
            </span>
        </div>


    </div>
</body>
<script src="script/jquery.js"></script>
<script src="script/toolbar.js"></script>
<script src="script/minirefresh.js"></script>
<script>
    $(function () {
        count = 0;
        toolbar = new Toolbar("#toolbar-container");
        toolbar.title.html("匹配列表");
        toolbar.backButton.click(function () {
            window.location.href = "../TransactionSystem/sale.html";
        });


        //创建下拉刷新对象
        var miniRefresh = new MiniRefresh({
            container: '#user-refresh-container',
            down: { //下拉刷新
                callback: function () {
                    //模拟ajax
                    setTimeout(function () {

                        $("#user-listdata").html("");
                        // 结束下拉刷新
                        miniRefresh.endDownLoading(true);
                    }, 200);
                }
            },
            up: { //上拉加载
                callback: function () {
                    //模拟ajax
                    setTimeout(function () {
                        e = $("#user-listdata");
                        html = "";

                        for (i = 0; i < 5; i++) {
                            html += "<tr>";
                            html +=
                                "<td><input type='checkbox' class='user-chooser view' onclick='onUserChoose(this, this.checked)'/></td>"
                            html += "<td>test</td>"
                            html += "<td>test</td>"
                            html += "</tr>";
                        }
                        e.html(e.html() + html);
                        count++;
                        // 结束下拉刷新 true 表示没有更多数据了
                        miniRefresh.endUpLoading(count > 5);
                    }, 200);
                }
            }
        });
    });

    /**
     * 选择中用户的回调
     */
    function onUserChoose(e, choose) {
        if (choose) {
            //选中的金额需要增加
        } else {
            //选中的金额需要减少
        }
    }
</script>

</html>